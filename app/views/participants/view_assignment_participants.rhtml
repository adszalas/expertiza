<script type="text/javascript">
<%= render :partial => 'shared_scripts/checkIfFileExists' %>

function showFields()
{
  roster = document.getElementById("import_type_roster").checked;
  user = document.getElementById("import_type_users").checked;
  
  
}
</script>

<h1>Participants</h1>
<h2>Assignment: <%= @assignment.name %></h2>
<br/>

<%if @participants.length > 0%>
<div class = "exp">
<table>
  <tr ><th colspan=5></th><th colspan=3 class="head">E-mail on ...</th>
  <tr><th class="head">Name</th><th class="head">Full Name</th class="head"><th class="head">Email Address</th><th class="head">Role</th><th class="head">Parent</th><th class="head">Review</th><th class="head">Submission</th><th class="head">Review of Review</th></tr>
<% for user in @participants %>
  <tr class= "exp">
    <td ><%= link_to user.name, :action => 'show',
	    :id => user.id %></td>
    <td ><%= user.fullname %></td>
    <td ><%= user.email %></td>
    <td ><%= link_to user.role.name, :controller => 'roles',
            :action => 'show', :id => user.role.id %></td>
    <td  align="center"><%= (User.find_by_id(user.parent_id)).name %></td>
    <td ><%= UsersController.yesorno(user.email_on_review) %></td>
    <td ><%= UsersController.yesorno(user.email_on_submission) %></td>
    <td ><%= UsersController.yesorno(user.email_on_review_of_review) %></td>
    <td ><%= link_to 'Remove', {:action => 'remove_assignment_participant', :id => user.id, :assignment_id => @assignment},
:confirm => 'Remove this participant?', :post => true %></td>
  </tr>
<% end -%>
</table>
</div>
<% end -%>

<br/>

<%= 
	render :partial => 'add_individual', 
		:locals => {:form_action => "add_assignment_participant",
					:obj_type => "assignment_id", 
					:obj_id => @assignment.id} 
%>
<br/>
<% 
  session[:return_to] = request.request_uri  
  session[:expected_fields] = 'Name, "Full name (last, first[ middle])", E-mail address, Password'
  session[:assignment_id] = @assignment.id 
%>
<%= link_to 'Import Participants', :controller=>'import_file', :action=>'start', :model => 'Participant' %>

<hr/>
